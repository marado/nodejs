--- a/wscript
+++ b/wscript
@@ -276,7 +276,7 @@
 
   conf.env["USE_GDBJIT"] = o.use_gdbjit
 
-  if not conf.env["USE_SHARED_ZLIB"] and not sys.platform.startswith("win32"):
+  if conf.env["USE_SHARED_ZLIB"] and not sys.platform.startswith("win32"):
     conf.env.append_value("LINKFLAGS", "-lz")
 
   conf.check(lib='dl', uselib_store='DL')
