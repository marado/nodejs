--- a/wscript
+++ b/wscript
@@ -284,7 +284,7 @@
   conf.env["USE_GDBJIT"] = o.use_gdbjit
   conf.env['USE_NPM'] = not o.without_npm
 
-  if not conf.env["USE_SHARED_ZLIB"] and not sys.platform.startswith("win32"):
+  if conf.env["USE_SHARED_ZLIB"] and not sys.platform.startswith("win32"):
     conf.env.append_value("LINKFLAGS", "-lz")
 
   conf.check(lib='dl', uselib_store='DL')
